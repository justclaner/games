<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            text-align:center;
        }
        #board {
            margin: 0 auto;
            display: flex;
            flex-wrap:wrap;
            width:445px;
            height:550px;
            border:1px solid black;
            justify-content: center;
            align-items: center;
        }

        #board div {
            width: 80px;
            height: 80px;
            border: 1px solid black;
            margin: 3px;
        }
        
        .letter {
            font-size:72px;
            margin: 0 auto;
            transform:translateY(-8px);
        }

        button {
            background-color: rgb(170,170,170);
            border: 2px solid black;
            border-radius: 10px;
            width: fit-content;
            height:fit-content;
            padding:10px;
            margin: 0 auto;
        }
        button:hover {
            background-color: rgb(230,230,230);
        }
        button:active {
            background-color: rgb(200,200,200);
            transform:translateY(1px);
        }
    </style>
    <title>Wordle</title>
</head>
<body>
    <h1>Wordle</h1>
    <div id="board"></div>
    <b><p id="winText" style="display:none; margin:10px auto; font-size:24px;">You Shouldn't Be Seeing This</p></b>
    <button id="reset" style="display:none; margin: 10px auto;" onclick="resetGame()">Try Again</button>
    
    <script>
        var words = "about,above,abuse,actor,acute,admit,adopt,adult,after,again,agent,agree,ahead,alarm,album,alert,alike,alive,allow,alone,along,alter,among,anger,Angle,angry,apart,apple,apply,arena,argue,arise,array,aside,asset,audio,audit,avoid,award,aware,badly,baker,bases,basic,basis,beach,began,begin,begun,being,below,bench,billy,birth,black,blame,blind,block,blood,board,boost,booth,bound,brain,brand,bread,break,breed,brief,bring,broad,broke,brown,build,built,buyer,cable,calif,carry,catch,cause,chain,chair,chart,chase,cheap,check,chest,chief,child,china,chose,civil,claim,class,clean,clear,click,clock,close,coach,coast,could,count,court,cover,craft,crash,cream,crime,cross,crowd,crown,curve,cycle,daily,dance,dated,dealt,death,debut,delay,depth,doing,doubt,dozen,draft,drama,drawn,dream,dress,drill,drink,drive,drove,dying,eager,early,earth,eight,elite,empty,enemy,enjoy,enter,entry,equal,error,event,every,exact,exist,extra,faith,false,fault,fiber,field,fifth,fifty,fight,final,first,fixed,flash,fleet,floor,fluid,focus,force,forth,forty,forum,found,frame,frank,fraud,fresh,front,fruit,fully,funny,giant,given,glass,globe,going,grace,grade,grand,grant,grass,great,green,gross,group,grown,guard,guess,guest,guide,happy,harry,heart,heavy,hence,henry,horse,hotel,house,human,ideal,image,index,inner,input,issue,japan,jimmy,joint,jones,judge,known,label,large,laser,later,laugh,layer,learn,lease,least,leave,legal,level,lewis,light,limit,links,lives,local,logic,loose,lower,lucky,lunch,lying,magic,major,maker,march,maria,match,maybe,mayor,meant,media,metal,might,minor,minus,mixed,model,money,month,moral,motor,mount,mouse,mouth,movie,music,needs,never,newly,night,noise,north,noted,novel,nurse,occur,ocean,offer,often,order,other,ought,paint,panel,paper,party,peace,peter,phase,phone,photo,piece,pilot,pitch,place,plain,plane,plant,plate,point,pound,power,press,price,pride,prime,print,prior,prize,proof,proud,prove,queen,quick,quiet,quite,radio,raise,range,rapid,ratio,reach,ready,refer,right,rival,river,robin,roger,roman,rough,round,route,royal,rural,scale,scene,scope,score,sense,serve,seven,shall,shape,share,sharp,sheet,shelf,shell,shift,shirt,shock,shoot,short,shown,sight,since,sixth,sixty,sized,skill,sleep,slide,small,smart,smile,smith,smoke,solid,solve,sorry,sound,south,space,spare,speak,speed,spend,spent,split,spoke,sport,staff,stage,stake,stand,start,state,steam,steel,stick,still,stock,stone,stood,store,storm,story,strip,stuck,study,stuff,style,sugar,suite,super,sweet,table,taken,taste,taxes,teach,teeth,terry,texas,thank,theft,their,theme,there,these,thick,thing,think,third,those,three,threw,throw,tight,times,tired,title,today,topic,total,touch,tough,tower,track,trade,train,treat,trend,trial,tried,tries,truck,truly,trust,truth,twice,under,undue,union,unity,until,upper,upset,urban,usage,usual,valid,value,video,virus,visit,vital,voice,waste,watch,water,wheel,where,which,while,white,whole,whose,woman,women,world,worry,worse,worst,worth,would,wound,write,wrong";
        var wordBank = [];
        var word = "";
        var letterPos;
        var rowStart;
        var rowEnd;
        var attempts;
        var randomWord;
        var gameEnded;
        var unique;
        for (i = 0; i < words.length; i++) {
            if (i%6 != 5) {
                word += words.at(i);
            } else {
                wordBank.push(word);
                word = "";
            } 
        }

        var board = document.getElementById("board");
        var winText = document.getElementById("winText");
        var resetButton = document.getElementById("reset");


        document.addEventListener("keydown",keyPress);

        window.onload = function() {
            createGame();
        }

        function createGame() {
        letterPos = 0;
        rowStart = 0;
        rowEnd = 4;
        attempts = 0;
        gameEnded = false;
        unique = new Map();
        randomWord = wordBank[Math.floor(Math.random()*wordBank.length)];
   //     console.log(randomWord);
        for (let i = 0; i < 5; i++) {
            let char = randomWord[i];
            if (!unique.has(char)) {unique.set(char,1);}
            else {unique.set(char,unique.get(char) + 1);}
        }

        for (let i = 0; i < 30; i++) {
            let tile = document.createElement("div") 
            tile.id = i.toString();
            board.appendChild(tile);
        }

        }



        function keyPress(e) {
            var yellowIndicator = new Map(unique);
            if (gameEnded) {return;}

            var input = e.key;
            var ascii = e.which;

            if (((ascii >= 65 && ascii <= 90)) && letterPos <= rowEnd) {
            let tile = document.getElementById(letterPos.toString());
            var letter = document.createElement("p");
            letter.innerHTML = e.key;
            letter.classList.add("letter");
            letterPos++;
            tile.appendChild(letter);
            } 
            if (input == "Backspace" && letterPos > rowStart) {
                letterPos--;
                let tile =  document.getElementById(letterPos.toString());
                tile.removeChild(tile.firstChild);
            }

            if (input == "Enter" && letterPos%5 == 0) {

                let node1 = document.getElementById((letterPos-5).toString());
                let node2 = document.getElementById((letterPos-4).toString());
                let node3 = document.getElementById((letterPos-3).toString());
                let node4 = document.getElementById((letterPos-2).toString());
                let node5 = document.getElementById((letterPos-1).toString());

                let letter1 = node1.firstChild.innerHTML;
                let letter2 = node2.firstChild.innerHTML;
                let letter3 = node3.firstChild.innerHTML;
                let letter4 = node4.firstChild.innerHTML;
                let letter5 = node5.firstChild.innerHTML;

                let wordTyped = "";
                for (let i = 1; i <= 5; i++) {
                    let node = eval("node" + i);
                    let letter = eval("letter" + i);
                    wordTyped +=letter;
                if (letter == randomWord[i-1]) {
                    node.style.backgroundColor = "green";
                    yellowIndicator.set(letter,yellowIndicator.get(letter)-1);
                } else if (randomWord.includes(letter)) {
                    if (yellowIndicator.get(letter) > 0) {
                    node.style.backgroundColor = "yellow";
                    yellowIndicator.set(letter,yellowIndicator.get(letter)-1);
                    } else {
                        node.style.backgroundColor = "gray";
                    }
                } else {
                    node.style.backgroundColor = "gray";
                }
              //  console.log(yellowIndicator);
            }

                rowStart += 5;
                rowEnd += 5;
                attempts++;
                if (wordTyped == randomWord) {
                    gameEnded = true;
                    displayWin();
                } else if (attempts == 6) {
                    gameEnded = true;
                    winText.innerHTML = randomWord;
                    winText.style.display = "block";
                    resetButton.style.display = "block";
                }
            }

        }

        function displayWin() {
            switch (attempts) {
                case 1: winText.innerHTML = "Genius";
                break;
                case 2: winText.innerHTML = "Magnificent";
                break;
                case 3: winText.innerHTML = "Impressive";
                break;
                case 4: winText.innerHTML = "Splendid";
                break;
                case 5: winText.innerHTML = "Great";
                break;
                case 6: winText.innerHTML = "Phew";
                break;
            }
            winText.style.display = "block";
            resetButton.style.display = "block";
        }

        function resetGame() {
            winText.style.display = "none";
            resetButton.style.display = "none";
            while (board.hasChildNodes()) {board.removeChild(board.firstChild);}
            createGame();
        }
    </script>
</body>
</html>